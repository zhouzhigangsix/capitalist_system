# ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

## âœ… éƒ¨ç½²å®Œæˆæƒ…å†µ

ä½ çš„ TDX Stock System å·²ç»æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ï¼

**æœåŠ¡å™¨ä¿¡æ¯:**
- IPåœ°å€: `139.155.158.47`
- ç³»ç»Ÿ: CentOS 7 x86_64
- éƒ¨ç½²ç›®å½•: `/opt/tdx-stock`

**è®¿é—®åœ°å€:**
- ä¸»é¡µ: **http://139.155.158.47/**
- ç­–ç•¥ä¸­å¿ƒ: **http://139.155.158.47/strategy.html**
- APIæ¥å£: **http://139.155.158.47/api/**
- å¥åº·æ£€æŸ¥: **http://139.155.158.47/api/health**

## ğŸ“Š å·²å®Œæˆçš„å·¥ä½œ

### 1. âœ… æœåŠ¡å™¨ç¯å¢ƒé…ç½®
- [x] Docker CE 26.1.4 (æœ€æ–°ç‰ˆ)
- [x] Docker Compose v2.27.1
- [x] Nginx 1.20.1
- [x] Go 1.22.0 (ç”¨äºç¼–è¯‘)

### 2. âœ… Docker é•œåƒæ„å»º
- [x] ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ
- [x] å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°
- [x] æˆåŠŸç¼–è¯‘ Go åº”ç”¨

### 3. âœ… æœåŠ¡éƒ¨ç½²
- [x] Docker å®¹å™¨è¿è¡Œä¸­
- [x] æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡
- [x] æˆåŠŸè¿æ¥åˆ°é€šè¾¾ä¿¡æœåŠ¡å™¨

### 4. âœ… Nginx åå‘ä»£ç†
- [x] HTTP è®¿é—®é…ç½®
- [x] é™æ€æ–‡ä»¶ç¼“å­˜ä¼˜åŒ–
- [x] API è·¯ç”±ä¼˜åŒ–

### 5. âœ… ç½‘ç»œè®¿é—®
- [x] 80 ç«¯å£å¼€æ”¾
- [x] å…¬ç½‘å¯è®¿é—®

## ğŸ”§ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose ps'
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose logs -f'
```

### é‡å¯æœåŠ¡
```bash
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose restart'
```

### åœæ­¢æœåŠ¡
```bash
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose down'
```

### å¯åŠ¨æœåŠ¡
```bash
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose up -d'
```

### æ›´æ–°ä»£ç 
```bash
bash deploy/quick-deploy.sh
```

## ğŸ“± ä¸‹ä¸€æ­¥ï¼šé…ç½®åŸŸåå’Œ SSL

### æ­¥éª¤ 1: è´­ä¹°åŸŸå
æ¨èï¼šé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€GoDaddy

### æ­¥éª¤ 2: é…ç½® DNS è§£æ

åœ¨åŸŸåæœåŠ¡å•†ç®¡ç†é¢æ¿æ·»åŠ  A è®°å½•ï¼š
```
ç±»å‹: A
ä¸»æœºè®°å½•: @ (æˆ– www)
è®°å½•å€¼: 139.155.158.47
TTL: 600
```

### æ­¥éª¤ 3: ç­‰å¾… DNS ç”Ÿæ•ˆ

æ£€æŸ¥ DNS æ˜¯å¦ç”Ÿæ•ˆï¼š
```bash
dig +short your-domain.com
# åº”è¯¥è¿”å›: 139.155.158.47
```

### æ­¥éª¤ 4: é…ç½® SSL è¯ä¹¦

```bash
bash deploy/setup-ssl.sh your-domain.com
```

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹ SSH å¯†ç 
```bash
ssh root@139.155.158.47
passwd
```

### 2. é…ç½® SSH å¯†é’¥ç™»å½•
```bash
# æœ¬åœ°æ‰§è¡Œ
ssh-keygen -t rsa -b 4096
ssh-copy-id root@139.155.158.47
```

### 3. ç¦ç”¨å¯†ç ç™»å½•ï¼ˆå¯é€‰ï¼‰
```bash
ssh root@139.155.158.47
vi /etc/ssh/sshd_config
# è®¾ç½®: PasswordAuthentication no
systemctl restart sshd
```

### 4. é…ç½®é˜²ç«å¢™ï¼ˆå¯é€‰ï¼‰
```bash
ssh root@139.155.158.47
systemctl start firewalld
systemctl enable firewalld
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --permanent --add-service=ssh
firewall-cmd --reload
```

## ğŸ“ è¿è¡Œ Python ç­–ç•¥

### åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œç­–ç•¥
```bash
ssh root@139.155.158.47

# å®‰è£… Python å’Œä¾èµ–
yum install -y python3 python3-pip
pip3 install requests pandas numpy

# è¿è¡Œç­–ç•¥
cd /opt/tdx-stock
python3 strategy_b1.py
```

### é…ç½®å®šæ—¶ä»»åŠ¡
```bash
ssh root@139.155.158.47

# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©ä¸‹åˆ 3 ç‚¹è¿è¡Œï¼‰
0 15 * * * cd /opt/tdx-stock && python3 strategy_b1.py >> /var/log/strategy.log 2>&1
```

## ğŸ“Š ç›‘æ§æœåŠ¡

### æ£€æŸ¥å®¹å™¨èµ„æºä½¿ç”¨
```bash
ssh root@139.155.158.47 'docker stats tdx-stock-web --no-stream'
```

### æ£€æŸ¥ç£ç›˜ç©ºé—´
```bash
ssh root@139.155.158.47 'df -h'
```

### æ£€æŸ¥å†…å­˜ä½¿ç”¨
```bash
ssh root@139.155.158.47 'free -h'
```

### æŸ¥çœ‹ Nginx æ—¥å¿—
```bash
ssh root@139.155.158.47 'tail -f /var/log/nginx/tdx-stock-access.log'
ssh root@139.155.158.47 'tail -f /var/log/nginx/tdx-stock-error.log'
```

## ğŸ”„ å¤‡ä»½æ•°æ®

### å¤‡ä»½æ•°æ®åº“
```bash
scp root@139.155.158.47:/opt/tdx-stock/stocks.db ./stocks.db.backup
```

### æ¢å¤æ•°æ®åº“
```bash
scp ./stocks.db.backup root@139.155.158.47:/opt/tdx-stock/stocks.db
ssh root@139.155.158.47 'cd /opt/tdx-stock && docker compose restart'
```

## ğŸ†˜ æ•…éšœæ’æŸ¥

### æœåŠ¡æ— å“åº”
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
ssh root@139.155.158.47 'docker compose ps'

# æŸ¥çœ‹æ—¥å¿—
ssh root@139.155.158.47 'docker compose logs'

# é‡å¯æœåŠ¡
ssh root@139.155.158.47 'docker compose restart'
```

### ç«¯å£è¢«å ç”¨
```bash
ssh root@139.155.158.47 'netstat -tulpn | grep :8080'
ssh root@139.155.158.47 'netstat -tulpn | grep :80'
```

### Nginx é…ç½®é”™è¯¯
```bash
ssh root@139.155.158.47 'nginx -t'
ssh root@139.155.158.47 'tail -f /var/log/nginx/error.log'
```

## ğŸ“ æŠ€æœ¯æ”¯æŒæ–‡æ¡£

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](docs/æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md)
- [éƒ¨ç½²è„šæœ¬è¯´æ˜](deploy/SCRIPTS.md)
- [é¡¹ç›®ä¸»æ–‡æ¡£](README.md)
- [API æ¥å£æ–‡æ¡£](API_æ¥å£æ–‡æ¡£.md)
- [å·²å®ŒæˆåŠŸèƒ½è®°å½•](docs/å·²ç»å®Œæˆè®°å½•.md)

## ğŸ¯ å·²éƒ¨ç½²çš„åŠŸèƒ½

### è‚¡ç¥¨æ•°æ®æŸ¥è¯¢
- âœ… å®æ—¶è¡Œæƒ…æŸ¥è¯¢
- âœ… Kçº¿æ•°æ®ï¼ˆæ—¥/å‘¨/æœˆ/åˆ†é’Ÿï¼‰
- âœ… åˆ†æ—¶æ•°æ®
- âœ… è‚¡ç¥¨æœç´¢

### ç­–ç•¥ç³»ç»Ÿ
- âœ… B1 ç­–ç•¥ï¼ˆçŸ¥è¡Œå¤šç©ºçº¿ + KDJï¼‰
- âœ… ç­–ç•¥ç»“æœå±•ç¤º
- âœ… CSV å¯¼å‡º

### Web ç•Œé¢
- âœ… å“åº”å¼è®¾è®¡
- âœ… æ·±è‰²ä¸»é¢˜
- âœ… å®æ—¶æ•°æ®æ›´æ–°
- âœ… å›¾è¡¨å±•ç¤º

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¯ç”¨ Nginx gzip å‹ç¼©** - å‡å°‘ä¼ è¾“æ•°æ®é‡
2. **é…ç½® Redis ç¼“å­˜** - æå‡æŸ¥è¯¢æ€§èƒ½
3. **æ·»åŠ  CDN** - åŠ é€Ÿé™æ€èµ„æºè®¿é—®
4. **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–** - æå‡ç­–ç•¥æŸ¥è¯¢é€Ÿåº¦

---

**ğŸ‰ æ­å–œï¼ä½ çš„è‚¡ç¥¨æ•°æ®æŸ¥è¯¢ç³»ç»Ÿå·²ç»æˆåŠŸä¸Šçº¿ï¼**

**ç°åœ¨å¯ä»¥é€šè¿‡ http://139.155.158.47 è®¿é—®ä½ çš„ç³»ç»Ÿäº†ï¼**

---

## ğŸ“ éƒ¨ç½²æ—¥å¿—

**éƒ¨ç½²æ—¶é—´:** 2025-12-01 17:32
**éƒ¨ç½²æ–¹å¼:** è‡ªåŠ¨åŒ–è„šæœ¬
**Docker ç‰ˆæœ¬:** 26.1.4
**Nginx ç‰ˆæœ¬:** 1.20.1
**Go ç‰ˆæœ¬:** 1.22.0
**ç³»ç»Ÿ:** CentOS 7 x86_64

**éƒ¨ç½²è€—æ—¶:** ~10 åˆ†é’Ÿ
**çŠ¶æ€:** âœ… æˆåŠŸ
